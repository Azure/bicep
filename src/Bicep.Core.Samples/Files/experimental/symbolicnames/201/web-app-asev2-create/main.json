{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
  "languageVersion": "1.9-experimental",
  "contentVersion": "1.0.0.0",
  "metadata": {
    "EXPERIMENTAL_WARNING": "Symbolic name support in ARM is experimental, and should be enabled for testing purposes only. Do not enable this setting for any production usage, or you may be unexpectedly broken at any time!",
    "_generator": {
      "name": "bicep",
      "version": "dev",
      "templateHash": "15143262702721931689"
    }
  },
  "parameters": {
    "aseName": {
      "type": "string",
      "metadata": {
        "description": "Name of the App Service Environment"
      }
    },
    "location": {
      "type": "string",
      "defaultValue": "[resourceGroup().location]",
      "metadata": {
        "description": "Location of the App Service Environment"
      }
    },
    "existingVirtualNetworkName": {
      "type": "string",
      "metadata": {
        "description": "Name of the existing VNET"
      }
    },
    "existingVirtualNetworkResourceGroup": {
      "type": "string",
      "metadata": {
        "description": "Name of the existing VNET resource group"
      }
    },
    "existingSubnetName": {
      "type": "string",
      "metadata": {
        "description": "Subnet name that will contain the App Service Environment"
      }
    }
  },
  "functions": [],
  "resources": {
    "existingVnet": {
      "type": "Microsoft.Network/virtualNetworks",
      "apiVersion": "2021-02-01",
      "name": "[parameters('existingVirtualNetworkName')]",
      "existing": true
    },
    "existingSubnet": {
      "type": "Microsoft.Network/virtualNetworks/subnets",
      "apiVersion": "2020-06-01",
      "name": "[format('{0}/{1}', parameters('existingVirtualNetworkName'), parameters('existingSubnetName'))]",
      "existing": true
    },
    "ase": {
      "type": "Microsoft.Web/hostingEnvironments",
      "apiVersion": "2020-06-01",
      "name": "[parameters('aseName')]",
      "kind": "ASEV2",
      "location": "[parameters('location')]",
      "properties": {
        "location": "[parameters('location')]",
        "name": "[parameters('aseName')]",
        "workerPools": [],
        "virtualNetwork": {
          "id": "[resourceInfo('existingSubnet').id]"
        }
      }
    }
  }
}