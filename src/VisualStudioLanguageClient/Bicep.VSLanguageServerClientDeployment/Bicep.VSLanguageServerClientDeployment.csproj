<Project Sdk="Microsoft.NET.Sdk">

	<PropertyGroup>
		<Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
		<SchemaVersion>2.0</SchemaVersion>
		<ProjectTypeGuids>{82b43b9b-a64c-4715-b499-d71e9ca2bd60};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids>
		<ProjectGuid>{2B479886-13CE-443D-A0E2-3926E3821F63}</ProjectGuid>
		<OutputType>Library</OutputType>
		<AppDesignerFolder>Properties</AppDesignerFolder>
		<RootNamespace>Bicep.VSLanguageServerClientDeployment</RootNamespace>
		<AssemblyName>Bicep.VSLanguageServerClientDeployment</AssemblyName>
		<GeneratePkgDefFile>false</GeneratePkgDefFile>
		<IncludeAssemblyInVSIXContainer>false</IncludeAssemblyInVSIXContainer>
		<IncludeDebugSymbolsInVSIXContainer>false</IncludeDebugSymbolsInVSIXContainer>
		<IncludeDebugSymbolsInLocalVSIXDeployment>false</IncludeDebugSymbolsInLocalVSIXDeployment>
		<CopyBuildOutputToOutputDirectory>false</CopyBuildOutputToOutputDirectory>
		<CopyOutputSymbolsToOutputDirectory>false</CopyOutputSymbolsToOutputDirectory>
		<StartAction>Program</StartAction>
		<StartProgram Condition="'$(DevEnvDir)' != ''">$(DevEnvDir)devenv.exe</StartProgram>
		<StartArguments>/rootsuffix Exp</StartArguments>
	</PropertyGroup>

	<ItemGroup>
		<None Include="source.extension.vsixmanifest">
			<SubType>Designer</SubType>
		</None>
	</ItemGroup>
	
    <ItemGroup>
    <ProjectReference Include="..\Bicep.VSLanguageServerClient\Bicep.VSLanguageServerClient.csproj">
      <Project>{F6155B20-2659-4B37-95A3-AAAC4CC03971}</Project>
      <Name>Bicep.VSLanguageServerClient</Name>
      <IncludeOutputGroupsInVSIX>BuiltProjectOutputGroup%3bBuiltProjectOutputGroupDependencies%3bGetCopyToOutputDirectoryItems%3bSatelliteDllsProjectOutputGroup%3b</IncludeOutputGroupsInVSIX>
      <IncludeOutputGroupsInVSIXLocalOnly>DebugSymbolsProjectOutputGroup%3b</IncludeOutputGroupsInVSIXLocalOnly>
    </ProjectReference>
  </ItemGroup>

	<Target Name="AddDllVsixSourceItems" AfterTargets="GetVsixSourceItems">
		<ItemGroup>
			<VSIXSourceItem Include="C:\EnlistmentsNew\bicep\src\Bicep.Core\bin\Debug\net6.0\Azure.Bicep.Core.dll" />
			<VSIXSourceItem Include="C:\EnlistmentsNew\bicep\src\Bicep.LangServer\bin\Debug\net6.0\Bicep.LangServer.dll" />
		</ItemGroup>
	</Target>

</Project>
